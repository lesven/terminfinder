<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminfinder - Verabredung Synchronisieren</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <header style="position:relative;">
            <h1>ğŸ“… Terminfinder</h1>
            <p class="subtitle">Finde den perfekten Tag und die perfekte Uhrzeit fÃ¼r euer Team</p>
        </header>

        <!-- Login Status -->
        <div id="loginStatus" class="card">
            <h3 class="section-title">ğŸ” Anmeldung erforderlich</h3>
            <div class="info-box">
                <div class="info-box-title">Bitte melde dich an</div>
                <div class="info-box-text">Gib deinen Gruppen-Code und Passwort ein und klicke auf "Anmelden"</div>
            </div>
            <div class="input-section">
                <div class="input-group">
                    <label for="loginCode">Gruppen-Code</label>
                    <input type="text" id="loginCode" placeholder="z.B. FAMILIE">
                </div>
                <div class="input-group">
                    <label for="loginPassword">Passwort</label>
                    <input type="password" id="loginPassword" placeholder="Gruppen-Passwort">
                </div>
            </div>
            <button class="submit-btn" onclick="handleLogin()" id="loginBtn">Anmelden</button>
            <div id="loginMessageContainer"></div>
        </div>

        <div id="mainApp" style="display: none;">
            <div class="tabs">
                <button class="tab active" onclick="switchTab('availability')">Meine VerfÃ¼gbarkeit</button>
                <button class="tab" onclick="switchTab('matches')">Gemeinsame Termine</button>
                <button class="tab" onclick="switchTab('participants')">Alle Teilnehmer</button>
            </div>

        <div id="availability-tab" class="tab-content active">
            <div class="card">
                <div class="info-box">
                    <div class="info-box-title">ğŸ”’ So funktioniert's</div>
                    <div class="info-box-text">Gib deinen Namen, Gruppen-Code und Passwort ein. WÃ¤hle dann fÃ¼r jeden Tag die Zeitfenster: Vormittag (VM), Nachmittag (NM) oder Abend (AB).</div>
                </div>
                <div class="input-section">
                    <div class="input-group">
                        <label for="name">Dein Name</label>
                        <input type="text" id="name" placeholder="z.B. Max Mustermann">
                    </div>
                    <div class="info-box">
                        <div class="info-box-title">âœ… Angemeldet</div>
                        <div class="info-box-text">Du bist erfolgreich angemeldet als Gruppe: <strong id="currentGroupDisplay"></strong></div>
                        <div style="margin-top:8px; display:flex; gap:8px;">
                            <button id="createShareBtn" onclick="createShareLink()" style="display:none;" class="submit-btn">Link erstellen</button>
                            <button id="logoutBtn" onclick="handleLogout()" style="display:none;" class="submit-btn">Ausloggen</button>
                        </div>
                    </div>
                </div>

                <div class="calendar-section">
                    <div class="calendar-header">
                        <h3 class="section-title">WÃ¤hle deine verfÃ¼gbaren Zeiten</h3>
                        <div class="month-nav">
                            <button class="nav-btn" onclick="changeMonth(-1)">â†</button>
                            <div class="month-display" id="monthDisplay"></div>
                            <button class="nav-btn" onclick="changeMonth(1)">â†’</button>
                        </div>
                    </div>

                    <div class="calendar-grid" id="calendar"></div>

                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background: #667eea;"></div>
                            <span>Deine Auswahl</span>
                        </div>
                        <div class="legend-item">
                            <span><strong>VM</strong> = Vormittag | <strong>NM</strong> = Nachmittag | <strong>AB</strong> = Abend</span>
                        </div>
                    </div>
                </div>

                <button class="submit-btn" onclick="saveAvailability()" id="saveBtn">VerfÃ¼gbarkeit speichern</button>
                <div id="messageContainer"></div>
            </div>
        </div>

        <div id="matches-tab" class="tab-content">
            <div class="card">
                <h3 class="section-title">ğŸ¯ Gemeinsame freie Zeiten</h3>
                <div class="info-box">
                    <div class="info-box-title">Perfekte Matches</div>
                    <div class="info-box-text">Hier siehst du alle Zeitfenster, in denen ALLE Teilnehmer Zeit haben</div>
                </div>
                <div id="matchesList"></div>
            </div>

            <div class="card">
                <h3 class="section-title">âš ï¸ Teilweise verfÃ¼gbar</h3>
                <div class="info-box">
                    <div class="info-box-title">Alternative Optionen</div>
                    <div class="info-box-text">Diese Zeitfenster funktionieren fÃ¼r einige, aber nicht alle</div>
                </div>
                <div id="partialMatchesList"></div>
            </div>
        </div>

        <div id="participants-tab" class="tab-content">
            <div class="card">
                <h3 class="section-title">ğŸ‘¥ Alle Teilnehmer & ihre VerfÃ¼gbarkeit</h3>
                <div id="participantsList"></div>
            </div>
        </div>
        </div> <!-- Ende mainApp -->
    </div>

    <script src="js/terminfinder.js"></script>
</body>
</html>